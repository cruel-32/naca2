(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0f7bd8b2"],{"83dd":function(t,e,n){"use strict";var a=n("bed3"),r=n.n(a);r.a},bed3:function(t,e,n){},d68f:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"member_all_container"},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{staticClass:"sticky title",attrs:{xs12:"",sm12:"",md12:""}},[n("h1",{staticClass:"headline"},[n("v-icon",{attrs:{color:"green"}},[t._v("insert_chart")]),t._v(" 전체 회원 통계\n      ")],1)]),n("v-flex",{staticClass:"sticky range",attrs:{xs6:"",sm6:"",md6:""}},[n("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-text-field",t._g({attrs:{readonly:!0,label:"통계 범위 선택 (from)","persistent-hint":""},model:{value:t.startAt,callback:function(e){t.startAt=e},expression:"startAt"}},a))]}}]),model:{value:t.viewStartAt,callback:function(e){t.viewStartAt=e},expression:"viewStartAt"}},[n("v-date-picker",{attrs:{type:"month","no-title":""},on:{input:function(e){t.viewStartAt=!1}},model:{value:t.startAt,callback:function(e){t.startAt=e},expression:"startAt"}})],1)],1),n("v-flex",{staticClass:"sticky range",attrs:{xs6:"",sm6:"",md6:""}},[n("v-menu",{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","full-width":!0},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[n("v-text-field",t._g({attrs:{readonly:!0,label:"통계 범위 선택 (to)","persistent-hint":""},model:{value:t.endAt,callback:function(e){t.endAt=e},expression:"endAt"}},a))]}}]),model:{value:t.viewEndAt,callback:function(e){t.viewEndAt=e},expression:"viewEndAt"}},[n("v-date-picker",{attrs:{type:"month","no-title":""},on:{input:function(e){t.viewEndAt=!1}},model:{value:t.endAt,callback:function(e){t.endAt=e},expression:"endAt"}})],1)],1),n("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[n("apexchart",{attrs:{type:"donut",options:t.hobbysOptions,height:t.hobbysHeight,series:t.hobbysSeries},on:{dataPointSelection:t.clickHobbys}})],1),n("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[n("apexchart",{attrs:{type:"donut",options:t.mbtiOptions,height:t.mbtiHeight,series:t.mbtiSeries},on:{dataPointSelection:t.clickMbti}})],1),n("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[n("apexchart",{attrs:{type:"donut",options:t.genderOptions,height:t.genderHeight,series:t.genderSeries}})],1),n("v-flex",{attrs:{xs12:"",sm6:"",md6:""}},[n("apexchart",{attrs:{type:"bar",options:t.ageOptions,height:t.ageHeight,series:t.ageSeries}})],1),t._l(t.rangeCountsChartInfo,function(t,e){return n("v-flex",{key:e,attrs:{xs12:"",sm6:"",md6:""}},[n("apexchart",{attrs:{type:"bar",options:t.options,height:t.height,series:t.series}})],1)}),n("v-dialog",{attrs:{persistent:""},model:{value:t.viewMembers,callback:function(e){t.viewMembers=e},expression:"viewMembers"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[t._v("\n          "+t._s(t.selectedTitle)+" "),n("span",{staticClass:"text-sm"},[t._v(t._s(t.selectedSubtitle))])]),n("v-card-text",{staticClass:"text-justify text-align-center"},[t._l(t.popupMembers,function(e,a){return n("v-btn",{key:a,attrs:{right:"",depressed:"",flat:""},on:{click:function(n){return t.$router.push("/members/detail/"+e.key)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])}),n("div",[t._v("등 "+t._s(t.popupMembers.length)+"명")])],2),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{center:"",outline:"",depressed:""},on:{click:t.copyToClipBoard}},[t._v("\n            COPY\n          ")]),n("v-btn",{attrs:{center:"",outline:"",depressed:""},on:{click:function(e){t.viewMembers=!1}}},[t._v("\n            Okay\n          ")])],1)],1)],1)],2)],1)},r=[],s=n("768b"),i=(n("ac4d"),n("8a81"),n("7f7f"),n("7514"),n("6b54"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("5df3"),n("f400"),n("d225")),c=n("b0b4"),l=n("308d"),u=n("6bb5"),h=n("4e2b"),d=n("9ab4"),b=n("60a3"),m=n("5e55"),p=n("479f"),f=n("5768"),v=n("5b07"),g=n("4d05"),y=n("1321"),x=n.n(y),k=n("f115"),O=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(u["a"])(e).apply(this,arguments)),t.viewStartAt=!1,t.viewEndAt=!1,t.endAt=t.$moment(new Date).format("YYYY-MM"),t.startAt=t.$moment(new Date).add(-2,"months").format("YYYY-MM"),t.dateRange={startAt:t.$moment(new Date).add(-2,"months").format("YYYYMM"),endAt:t.$moment(new Date).format("YYYYMM")},t.today=t.$moment(new Date),t.viewMembers=!1,t.popupMembers=[],t.selectedTitle="",t.selectedSubtitle="",t.hobbysVO=new Map,t.genderVO=new Map,t.ageVO=new Map,t.rangeCountsVO=new Map,t.rangeCountsChartInfo=[],t.genderSeries=[],t.genderHeight="auto",t.genderOptions={},t.hobbysSeries=[],t.hobbysHeight="auto",t.hobbysOptions={},t.mbtiVO=new Map,t.mbtiSeries=[],t.mbtiHeight="auto",t.mbtiOptions={},t.mbtiList=["모릅니다","INFJ","INTJ","INFP","INTP","ISFJ","ISTJ","ISFP","ISTP","ESFJ","ESTJ","ESFP","ESTP","ENFJ","ENTJ","ENFP","ENTP"],t.ageSeries=[],t.ageHeight="auto",t.ageOptions={title:{text:"남녀 평균 나이"},legend:{position:"top"},xaxis:{categories:["평균 나이"]}},t}return Object(h["a"])(e,t),Object(c["a"])(e,[{key:"setDateRange",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(g["a"].setProgress(!0),e=this.$moment(this.startAt),n=this.$moment(this.endAt),a=n.diff(e,"months"),!(a<0)){t.next=8;break}return k["a"].showSnackbar({snackColor:"error",snackText:"날짜범위를 다시 설정하세요"}),g["a"].setProgress(!1),t.abrupt("return");case 8:return this.dateRange={startAt:parseInt("".concat(this.$moment(this.startAt).format("YYYYMM"),"01")),endAt:parseInt("".concat(this.$moment(this.endAt).format("YYYYMM"),"31"))},this.resetRangeEvents(),t.next=12,m["a"].getEventsRange(this.dateRange);case 12:this.setRangeEvents(),this.updateRangeEventChart(),g["a"].setProgress(!1);case 15:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"setDashboardData",value:function(){g["a"].setProgress(!0),this.setChartCommonInfo(),this.updateHobbysChart(),this.updateMbtiChart(),this.updateGenderChart(),this.updateAgeChart(),this.updateRangeEventChart(),g["a"].setProgress(!1)}},{key:"setChartCommonInfo",value:function(){var t=this;this.members.forEach(function(e){if(e.hobbys.forEach(function(n){var a=t.hobbysVO.get(n);t.hobbysVO.set(n,{count:(a&&a.count||0)+1,members:a&&Array.isArray(a.members)?a.members.concat([e]):[e]})}),e.mbti){var n=t.mbtiVO.get(e.mbti);t.mbtiVO.set(e.mbti,{count:(n&&n.count||0)+1,members:n&&Array.isArray(n.members)?n.members.concat([e]):[e]})}var a=t.genderVO.get(e.gender),r=t.ageVO.get(e.gender),s=t.today.diff(t.$moment(e.birth.toString()),"years")+1;t.genderVO.set(e.gender,(a||0)+1),t.ageVO.set(e.gender,(r||0)+s)}),console.log("this.mbtiVO :::: ",this.mbtiVO)}},{key:"resetRangeEvents",value:function(){this.rangeCountsVO=new Map,this.rangeCountsChartInfo=[]}},{key:"setRangeEvents",value:function(){var t=this;this.events.forEach(function(e){e.key;var n=e.date.toString(),a="".concat(n.slice(0,4),".").concat(n.slice(4,6)),r=e.memberKeys,s=t.rangeCountsVO.get(a);if(s)r.forEach(function(t){s.set(t,(s.get(t)||0)+1)});else{var i=new Map;r.forEach(function(t){i.set(t,1)}),t.rangeCountsVO.set(a,i)}})}},{key:"created",value:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:g["a"].setProgress(!0),Promise.all([p["a"].getContents(),f["a"].getPlaces(),v["a"].getMembersInActive(),v["a"].getMemberByKey(this.params?this.params.key:""),this.setDateRange()]).then(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("done : ",n),e.setDashboardData(),g["a"].setProgress(!1);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"clickHobbys",value:function(t,e,n){var a=t.target.parentNode;if(a){var r=n.dataPointIndex,s=n.w.globals.seriesNames[r],i=this.contents.find(function(t){return t.name===s});if(i){this.selectedTitle=s,this.selectedSubtitle="활동을 좋아하는 멤버입니다.";var o=this.hobbysVO.get(i.key);this.popupMembers=o?o.members:[],this.viewMembers=!0}}}},{key:"clickMbti",value:function(t,e,n){var a=t.target.parentNode;if(a){console.log("parentNode ::::: ",a);var r=n.dataPointIndex,s=n.w.globals.seriesNames[r];console.log("seriesName ::::: ",s);var i=this.mbtiList.find(function(t){return t===s});if(i){this.selectedTitle=s,this.selectedSubtitle="모릅니다"===s?"mbti를 모르거나 밝히고 싶지 않은 멤버입니다.":"특성을 가진 멤버입니다.";var o=this.mbtiVO.get(i);this.popupMembers=o?o.members:[],this.viewMembers=!0}}}},{key:"updateHobbysChart",value:function(){var t=this,e=[],n=[],a=!0,r=!1,i=void 0;try{for(var o,c=function(){var a=Object(s["a"])(o.value,2),r=a[0],i=a[1];e.push(i.count);var c=t.contents.find(function(t){return t.key===r});n.push(c.name)},l=this.hobbysVO[Symbol.iterator]();!(a=(o=l.next()).done);a=!0)c()}catch(u){r=!0,i=u}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}this.hobbysSeries=e,this.hobbysOptions={title:{text:"전체 선호활동(취미)"},legend:{position:"top"},labels:n,tooltip:{y:{formatter:function(t){return"\n              ".concat(t," 명 (click 하여 자세히 보기)\n            ")}}}},this.hobbysHeight=380}},{key:"updateMbtiChart",value:function(){var t=this,e=[],n=[],a=!0,r=!1,i=void 0;try{for(var o,c=function(){var a=Object(s["a"])(o.value,2),r=a[0],i=a[1];e.push(i.count);var c=t.mbtiList.find(function(t){return t===r});console.log("mbti ::::: ",c),c&&n.push(c)},l=this.mbtiVO[Symbol.iterator]();!(a=(o=l.next()).done);a=!0)c()}catch(u){r=!0,i=u}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}this.mbtiSeries=e,this.mbtiOptions={title:{text:"전체 MBTI 비율"},legend:{position:"top"},labels:n,tooltip:{y:{formatter:function(t){return"\n              ".concat(t," 명 (click 하여 자세히 보기)\n            ")}}}},this.mbtiHeight=380}},{key:"updateGenderChart",value:function(){var t=[],e=[],n=!0,a=!1,r=void 0;try{for(var i,o=this.genderVO[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=Object(s["a"])(i.value,2),l=c[0],u=c[1];t.push(u),e.push("F"===l?"여자":"남자")}}catch(h){a=!0,r=h}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}this.genderSeries=t,this.genderOptions={title:{text:"전체 남녀 성비"},legend:{position:"top"},labels:e},this.genderHeight=380}},{key:"updateAgeChart",value:function(){var t=[{data:[],name:"여자 평균 나이"},{data:[],name:"남자 평균 나이"}],e=!0,n=!1,a=void 0;try{for(var r,i=this.ageVO[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=Object(s["a"])(r.value,2),c=o[0],l=o[1],u=this.genderVO.get(c);if(u){var h=(l/u).toFixed(2);"M"===c?t[1].data.push(h):t[0].data.push(h)}}}catch(d){n=!0,a=d}finally{try{e||null==i.return||i.return()}finally{if(n)throw a}}this.ageSeries=t,this.ageHeight=380}},{key:"updateRangeEventChart",value:function(){var t=this;this.rangeCountsChartInfo=[];var e=[],n=!0,a=!1,r=void 0;try{for(var i,o=this.rangeCountsVO.entries()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=Object(s["a"])(i.value,2),l=c[0],u=c[1],h=[{data:[],name:"".concat(l," 참석횟수")}],d={title:{text:"".concat(l," 참석왕")},legend:{position:"top"},plotOptions:{bar:{horizontal:!0}},xaxis:{}},b=[],m=30*u.size+100,p=!0,f=!1,v=void 0;try{for(var g,y=function(){var e=Object(s["a"])(g.value,2),n=e[0],a=e[1],r=t.members.find(function(t){return t.key===n});h[0].data.push(a),b.push(r?r.name:"탈퇴한 회원")},x=u.entries()[Symbol.iterator]();!(p=(g=x.next()).done);p=!0)y()}catch(k){f=!0,v=k}finally{try{p||null==x.return||x.return()}finally{if(f)throw v}}d.xaxis={categories:b},e.push({series:h,options:d,height:m})}}catch(k){a=!0,r=k}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}this.rangeCountsChartInfo=e}},{key:"copyToClipBoard",value:function(){this.viewMembers=!1,this.$clipboard('술없모에서 "'.concat(this.selectedTitle,'" ').concat(this.selectedSubtitle,"\n[ ").concat(this.popupMembers.map(function(t){return t.name}).join(" ")," ] 등 ").concat(this.popupMembers.length,"명"))}},{key:"events",get:function(){return m["a"].events}},{key:"members",get:function(){return v["a"].members}},{key:"places",get:function(){return f["a"].places}},{key:"contents",get:function(){return p["a"].contents}}]),e}(b["c"]);d["__decorate"]([Object(b["b"])()],O.prototype,"params",void 0),d["__decorate"]([Object(b["d"])("startAt"),Object(b["d"])("endAt")],O.prototype,"setDateRange",null),O=d["__decorate"]([Object(b["a"])({components:{apexchart:x.a}})],O);var w=O,C=w,S=(n("83dd"),n("2877")),M=n("6544"),A=n.n(M),V=n("8336"),_=n("b0af"),E=n("99d9"),Y=n("12b2"),P=n("2e4b"),I=n("169a"),j=n("0e8f"),R=n("132d"),T=n("a722"),H=n("e449"),D=n("9910"),N=n("2677"),$=Object(S["a"])(C,a,r,!1,null,"00685d95",null);e["default"]=$.exports;A()($,{VBtn:V["a"],VCard:_["a"],VCardActions:E["a"],VCardText:E["b"],VCardTitle:Y["a"],VDatePicker:P["a"],VDialog:I["a"],VFlex:j["a"],VIcon:R["a"],VLayout:T["a"],VMenu:H["a"],VSpacer:D["a"],VTextField:N["a"]})}}]);
//# sourceMappingURL=chunk-0f7bd8b2.da1fc268.js.map